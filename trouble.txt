ValueError: [E002] Can't find factory for 'keyword_extractor' for language Russian (ru). This usually happ
ens when spaCy calls `nlp.create_pipe` with a custom component name that's not registered on the current l
anguage class. If you're using a custom component, make sure you've added the decorator `@Language.compone
nt` (for function components) or `@Language.factory` (for class components).
import spacy
nlp = spacy.load("ru_core_news_lg")

myfile = open("text.txt", "rt")
text = myfile.read()
myfile.close()

# key_words = [token.text for token in doc if token.pos_ in ['NOUN']]
# print("Ключевые слова, найденные spacy: ", key_words)

# with open("spacy_key_words_result.txt", "w") as text_file:
#     for word in key_words:
#         text_file.write(f"{word}\n")

nlp.add_pipe("keyword_extractor", last=True, config={"top_n": 10, "min_ngram": 3, "max_ngram": 3, "strict": True, "top_n_sent": 3})

doc = nlp(text)

print("Top Document Keywords:", doc._.keywords)
for sent in doc.sents:
    print(f"Sentence: {sent.text}")
    print("Top Sentence Keywords:", sent._.sent_keywords)